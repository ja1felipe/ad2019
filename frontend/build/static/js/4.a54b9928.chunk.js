(this["webpackJsonptemplate-typescript"]=this["webpackJsonptemplate-typescript"]||[]).push([[4],{166:function(e,n,t){"use strict";t.r(n);var a=t(45),r=t(0),o=t.n(r),i=t(11),c=t(7);function s(){var e=Object(i.a)(["\n  font-size: 50px;\n  font-family: 'Lobster' !important;\n  color: ",";\n  margin: 0;\n"]);return s=function(){return e},e}function u(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return u=function(){return e},e}var l=c.c.div(u()),m=c.c.h1(s(),(function(e){return e.theme.colors.primary})),d=t(49),f=t(70),p=t.n(f),h=t(16),g=function(){return o.a.createElement(l,null,o.a.createElement(m,null,"Amigo Secreto"),o.a.createElement(d.Icon,{icon:p.a,style:{color:h.a.colors.secondary,fontSize:"70px"}}))};function b(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-around;\n"]);return b=function(){return e},e}var _=c.c.div(b()),E=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_,null,o.a.createElement(g,null)),o.a.createElement("hr",{style:{margin:0}}))},y=t(88),v=t.n(y),O=t(71),x=t.n(O),j=t(18),S=x.a.create({baseURL:"https://apiad2019.herokuapp.com"}),w={fetchUsers:function(e){return new Promise((function(n,t){S.get("/users?page=".concat(e,"&limit=5")).then((function(e){console.log(e),n({data:e.data.users,pages:e.data.pages})})).catch((function(e){console.log(e.response),j.store.addNotification({title:"Falha!",message:"Erro ao listar usu\xe1rios.",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}})}))}))},getUser:function(e){return new Promise((function(n,t){S.get("/users/".concat(e)).then((function(e){console.log(e),n(e.data.user)})).catch((function(e){console.log(e.response),j.store.addNotification({title:"Falha!",message:"Erro ao buscar usu\xe1rio.",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}})}))}))},deleteUser:function(e){return new Promise((function(n,t){S.delete("/users/".concat(e)).then((function(e){console.log(e),n(!0)})).catch((function(e){n(!1),console.log(e.response),j.store.addNotification({title:"Falha!",message:"Erro ao deletar usu\xe1rios.",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}})}))}))},createUser:function(e){return new Promise((function(n,t){S.post("/users/",e).then((function(e){console.log(e),j.store.addNotification({title:"Sucesso!",message:"Usu\xe1rio criado com sucesso.",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:6e3,onScreen:!0}}),n(!0)})).catch((function(e){n(!1),console.log(e.response),j.store.addNotification({title:"Falha!",message:"Falha ao criar usu\xe1rio.",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}})}))}))},updateUser:function(e,n){return new Promise((function(t,a){S.put("/users/".concat(e),n).then((function(e){console.log(e),j.store.addNotification({title:"Sucesso!",message:"Usu\xe1rio editado com sucesso.",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}}),t(!0)})).catch((function(e){t(!1),console.log(e.response),j.store.addNotification({title:"Falha!",message:"Falha ao editar usu\xe1rio.",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}})}))}))},draw:function(){return new Promise((function(e,n){S.post("/users/shuffle").then((function(n){console.log(n),j.store.addNotification({title:"Sucesso!",message:"Usu\xe1rio sorteado e emails enviados com sucesso.",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:6e3,onScreen:!0}}),e(!0)})).catch((function(n){e(!1),console.log(n.response),j.store.addNotification({title:"Falha!",message:"Falha ao sortear usu\xe1rio.",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!0}})}))}))}};function N(){var e=Object(i.a)(["\n  background: ",";\n  color: ",";\n  padding: 10px;\n  border: none;\n  cursor: pointer;\n  text-transform: uppercase;\n  font-weight: 600;\n  width: 100% !important;\n  height: 100% !important;\n\n  &:disabled {\n    background: ",";\n  }\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"]);return N=function(){return e},e}function k(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-column-gap: 15px;\n  grid-row-gap: 15px;\n  & label {\n    text-transform: uppercase;\n    font-size: 13px;\n  }\n"]);return k=function(){return e},e}function I(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 5px;\n"]);return I=function(){return e},e}function C(){var e=Object(i.a)(["\n  padding: 5px;\n  border: none;\n  border-bottom: 2px solid ",";\n  background: none;\n  color: ",";\n  margin-bottom: 25px;\n  font-size: 12px;\n  width: 220px;\n  &:focus {\n    border: none;\n    outline: none;\n    border-bottom: 2px solid ",";\n  }\n"]);return C=function(){return e},e}function F(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  & label {\n    text-transform: uppercase;\n    font-size: 13px;\n  }\n\n  & h1 {\n    text-align: center;\n    font-size: 40px;\n    font-family: 'Lobster' !important;\n    margin-bottom: 15px;\n    color: ",";\n  }\n"]);return F=function(){return e},e}function U(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n"]);return U=function(){return e},e}var z=c.c.div(U()),A=c.c.form(F(),(function(e){return e.theme.colors.primary})),P=c.c.input(C(),(function(e){return e.theme.colors.secondary+"82"}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.secondary})),J=c.c.div(I()),L=c.c.div(k()),R=c.c.button(N(),(function(e){return e.theme.colors.secondary+"e0"}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.light})),D=function(e){var n=Object(r.useState)(""),t=Object(a.a)(n,2),i=t[0],c=t[1],s=Object(r.useState)(""),u=Object(a.a)(s,2),l=u[0],m=u[1],d=Object(r.useState)(!1),f=Object(a.a)(d,2),p=f[0],h=f[1];function g(){return""!==i&&""!==l&&!!v.a.isEmail(l)}function b(){c(""),m("")}return Object(r.useEffect)((function(){e.user&&e.user._id&&(h(!0),w.getUser(e.user._id).then((function(e){c(e.name),m(e.email),h(!1)})))}),[e.user]),o.a.createElement(z,null,o.a.createElement(A,{onSubmit:function(n){!function(n){n.preventDefault(),h(!0);var t={name:i,email:l};e.user?e.user._id&&w.updateUser(e.user._id,t).then((function(n){n&&(h(!1),e.setShow(),e.refresh&&e.refresh(),b())})):w.createUser(t).then((function(n){n&&(h(!1),e.setShow(),e.refresh&&e.refresh(),b())}))}(n)}},e.user?o.a.createElement("h1",null,"Editar usu\xe1rio"):o.a.createElement("h1",null,"Cadastro de novo usu\xe1rio"),o.a.createElement(L,null,o.a.createElement(J,null,o.a.createElement("label",{htmlFor:"name"},"name"),o.a.createElement(P,{id:"name",value:i,onChange:function(e){return c(e.target.value)},placeholder:"ex: Jo\xe3o Paulo",type:"text"})),o.a.createElement(J,null,o.a.createElement("label",{htmlFor:"email"},"E-mail"),o.a.createElement(P,{id:"email",value:l,onChange:function(e){return m(e.target.value)},placeholder:"ex: joao@email.com",type:"email"}))),o.a.createElement(R,{type:"submit",disabled:!g(),title:g()?"":"Por favor preencha todos os campos corretamente.",className:"button ".concat(p?"is-loading":"")},e.user?"Editar":"Criar")))},T=function(e){return o.a.createElement("div",{className:"modal",style:{display:e.show?"flex":"none",width:"100vw",height:"100vh",alignItems:"center"}},o.a.createElement("div",{className:"modal-background"}),o.a.createElement("div",{className:"modal-card"},o.a.createElement("header",{className:"modal-card-head",style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement("button",{onClick:e.setShow,className:"delete","aria-label":"close"})),o.a.createElement("section",{className:"modal-card-body",style:{padding:0}},o.a.createElement(D,{refresh:e.refresh,setShow:e.setShow,user:e.user}))))};function q(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 15px;\n  & button {\n    background-color: ",";\n    color: ",";\n    margin: 0 10px;\n  }\n"]);return q=function(){return e},e}var B=c.c.div(q(),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.light})),G=t(20);function H(){var e=Object(i.a)(["\n  & th,\n  & td {\n    padding: 10px 20px;\n  }\n\n  & th {\n    background: ",";\n    color: ",";\n  }\n\n  & tr {\n    background: ",";\n    border-bottom: 1px solid ",";\n  }\n  & tr:hover {\n    background: ",";\n    border-bottom: 1px solid ",";\n  }\n"]);return H=function(){return e},e}function K(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  & .button {\n    width: 30px;\n    height: 30px;\n    margin-left: 5px;\n  }\n"]);return K=function(){return e},e}var M=c.c.div(K()),Q=c.c.table(H(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.contrast}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.contrast})),V=t(164),W=t.n(V),X=t(165),Y=t.n(X),Z=t(1),$=function(e){var n=Object(r.useState)(!1),t=Object(a.a)(n,2),i=t[0],c=t[1],s=Object(r.useState)(!1),u=Object(a.a)(s,2),l=u[0],m=u[1],f=Object(r.useState)(),p=Object(a.a)(f,2),g=p[0],b=p[1];Object(Z.f)();return o.a.createElement(M,null,o.a.createElement(T,{refresh:function(){e.refresh(!0)},setShow:function(){m((function(e){return!e}))},show:l,user:g}),o.a.createElement(Q,null,o.a.createElement("thead",null,o.a.createElement("tr",null,e.columns.map((function(e,n){return o.a.createElement("th",{key:n},o.a.createElement("span",null,e.name))})),o.a.createElement("th",{style:{textAlign:"center"}},"A\xe7\xf5es"))),o.a.createElement("tbody",null,e.data.map((function(n,t){return o.a.createElement("tr",{key:t},e.columns.map((function(e,t){var a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",a=Array.isArray(e)?e:e.split(t);return a.reduce((function(e,n){return e&&e[n]}),n)}(e.selector,n);return o.a.createElement("td",{key:t},a)})),o.a.createElement("td",null,o.a.createElement("button",{onClick:function(){n&&(b(n),m(!0))},style:{background:h.a.colors.secondary},className:"button"},o.a.createElement("span",{className:"icon is-small"},o.a.createElement(d.Icon,{icon:Y.a,style:{color:h.a.colors.contrast,fontSize:"20px"}}))),o.a.createElement("button",{onClick:function(){var t;n._id&&(t=n._id,c(!0),w.deleteUser(t).then((function(n){n&&(e.refresh(!0),c(!1))})))},className:"button is-danger ".concat(i?"is-loading":"")},o.a.createElement("span",{className:"icon is-small"},i?void 0:o.a.createElement(d.Icon,{icon:W.a,style:{color:h.a.colors.contrast,fontSize:"20px"}})))))})))))};function ee(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  & button,\n  & select {\n    margin: 5px;\n    height: 30px !important;\n  }\n"]);return ee=function(){return e},e}function ne(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 20px;\n"]);return ne=function(){return e},e}var te=c.c.div(ne()),ae=c.c.div(ee()),re=function(e){var n=Object(r.useState)([]),t=Object(a.a)(n,2),i=t[0],c=t[1],s=Object(r.useState)(!0),u=Object(a.a)(s,2),l=u[0],m=u[1],d=Object(r.useState)(1),f=Object(a.a)(d,2),p=f[0],h=f[1],g=Object(r.useState)(1),b=Object(a.a)(g,2),_=b[0],E=b[1],y=Object(r.useState)(!1),v=Object(a.a)(y,2),O=v[0],x=v[1];return Object(r.useEffect)((function(){m(!0),w.fetchUsers(_).then((function(e){c(e.data),h(e.pages),m(!1)})),x(!1)}),[_,O,e.extRefresh]),o.a.createElement(o.a.Fragment,null,l?o.a.createElement(G.a,null):i.length>0?o.a.createElement(te,null,o.a.createElement($,{refresh:x,columns:[{name:"Nome",selector:"name"},{name:"E-mail",selector:"email"}],data:i})):o.a.createElement("div",{style:{textAlign:"center",marginTop:20,fontSize:25}},"Nenhum usu\xe1rio cadastrado ainda, aproveite e cadastre um novo :D"),i.length>0&&o.a.createElement(ae,null,o.a.createElement("button",{onClick:function(){return E((function(e){return e-1}))},className:"button",disabled:_<2},"Anterior"),o.a.createElement("select",{className:"select",value:_,onChange:function(e){return E(Number(e.target.value))}},Array.from(Array(p),(function(e,n){return o.a.createElement("option",{key:n,value:n+1},n+1)}))),o.a.createElement("button",{disabled:_===p,onClick:function(){return E((function(e){return e+1}))},className:"button"},"Pr\xf3ximo")))};n.default=function(){var e=Object(r.useState)(!1),n=Object(a.a)(e,2),t=n[0],i=n[1],c=Object(r.useState)(!1),s=Object(a.a)(c,2),u=s[0],l=s[1],m=Object(r.useState)(!1),d=Object(a.a)(m,2),f=d[0],p=d[1];function h(){i((function(e){return!e}))}return o.a.createElement("div",null,o.a.createElement(E,null),o.a.createElement(B,null,o.a.createElement("button",{className:"button",onClick:h},"Cadastrar novo usu\xe1rio"),o.a.createElement("button",{className:"button ".concat(f?"is-loading":""),onClick:function(){p(!0),w.draw().then((function(){p(!1)}))}},"Fazer sorteio")),o.a.createElement(T,{refresh:function(){l((function(e){return!e}))},setShow:h,show:t}),o.a.createElement(re,{extRefresh:u}))}}}]);
//# sourceMappingURL=4.a54b9928.chunk.js.map